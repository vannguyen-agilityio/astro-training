---
export interface ImageProps {
  className?: string;
  alt?: string;
  width: {
    mobile?: string;
    tablet?: string;
    desktop?: string;
    default?: string;
  };
  height: {
    mobile?: string;
    tablet?: string;
    desktop?: string;
    default?: string;
  };
  url: {
    mobile?: string;
    mobile2x?: string;
    tablet?: string;
    desktop?: string;
    default?: string;
  };
  isLazyLoading?: boolean;
}

const {
  alt,
  width,
  height,
  url,
  className,
  isLazyLoading = false
} = Astro.props as ImageProps;
---

<picture class={`${className}`}>
  {
    url.desktop && (
      <source
        media="(min-width: 1200px)"
        width={width?.desktop}
        height={height?.desktop}
        srcset={url.desktop}
        type="image/webp"
      />
    )
  }
  {
    url.tablet && (
      <source
        media="(min-width: 768px)"
        width={width?.tablet}
        height={height?.tablet}
        srcset={url.tablet}
        type="image/webp"
      />
    )
  }
  {
    url.mobile && (
      <source
        media="(max-width: 767px)"
        srcset={`${url.mobile} 1x, ${url.mobile2x} 2x`}
        type="image/webp"
        width={width?.mobile}
        height={height?.mobile}
        type="image/webp"
      />
    )
  }
  <img
    src={url?.default}
    alt={alt}
    width={width?.default}
    height={height?.default}
    loading={isLazyLoading ? 'lazy' : 'eager'}
  />
</picture>
